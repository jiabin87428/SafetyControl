(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pointAdd/pointAdd"],{"0a4f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.obj.sublist,function(e,n){var o=t.getIcon(e);return{$orig:t.__get_orig(e),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:n}})},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})},"348f":function(t,e,n){},"7c65":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("17f7")),s=c(n("3731")),u=c(n("59a9")),a=n("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){return n.e("components/list/uni-list/uni-list").then(n.bind(null,"7c03"))},d=function(){return n.e("components/list/uni-icon/uni-icon").then(n.bind(null,"ba08"))},b=function(){return n.e("components/list/uni-list-item/uni-list-item").then(n.bind(null,"4b9c"))},h={computed:(0,a.mapState)(["sublistItem","sublistIndex","userInfo"]),components:{uniList:f,uniListItem:b,uniIcon:d},data:function(){return{needGetItemOnShow:!1,showClose:!1,showSave:!1,editable:!1,backPressFlag:!0,obj:"",normal:{color:"#24BE41",size:"22",type:"checkbox-filled"},undetected:{color:"#FFDE52",size:"22",type:"info-filled"},abnormal:{color:"#C11E1E",size:"22",type:"clear"}}},onLoad:function(t){this.obj=JSON.parse(t.obj),this.checkShowClose()},onNavigationBarButtonTap:function(){var e=this;0!=e.editable?t.showModal({title:"提示",content:"确认要设置所有的检查点都正常吗？",success:function(t){if(t.confirm)for(var n=0;n<e.obj.sublist.length;n++){var o=e.obj.sublist[n];o["jcjl"]="正常",o["jcwtms"]="",o["zgfs"]=""}else t.cancel}}):t.showToast({icon:"none",title:"已关单 无法编辑",duration:1e3})},onBackPress:function(){var e=this;if(1==e.backPressFlag)return t.showModal({title:"请确认是否有修改需要保存",content:"如果直接返回，所有修改将不作保存。",confirmText:"保存一下",cancelText:"直接返回",success:function(n){n.confirm?e.saveClick():n.cancel&&(e.backPressFlag=!1,console.log(o("backPressFlag2: "+e.backPressFlag," at pages/pointAdd/pointAdd.vue:131")),t.navigateBack({delta:1}))}}),console.log(o("backPressFlag1: "+e.backPressFlag," at pages/pointAdd/pointAdd.vue:138")),e.backPressFlag},onShow:function(){1==this.needGetItemOnShow&&null!=this.sublistIndex&&null!=this.sublistItem&&(console.log(o(""+JSON.stringify(this.sublistItem)," at pages/pointAdd/pointAdd.vue:144")),this.obj.sublist[this.sublistIndex]=this.sublistItem,this.removeSublistItem(),console.log(o("1111111"," at pages/pointAdd/pointAdd.vue:147"))),this.needGetItemOnShow=!1},methods:l({},(0,a.mapMutations)(["removeSublistItem"]),{bindDateChange:function(t){this.obj.jcrq=t.target.value},jumpEdit:function(e,n){0!=this.editable&&(this.needGetItemOnShow=!0,t.navigateTo({url:"./pointCheckInfo?item="+JSON.stringify(e)+"&index="+n}))},getIcon:function(t){return"正常"==t.jcjl?this.normal:"异常"==t.jcjl?this.abnormal:this.undetected},saveClick:function(){var e=this,n=u.default.copyObj(e.obj);n["userid"]=e.userInfo.userid,n["sublist"]=JSON.stringify(n["sublist"]),s.default.requestLoading(i.default.UpdatePoint,n,"正在加载",function(n){t.showToast({icon:"none",title:"保存成功",duration:1e3}),e.obj.id=n.id,e.checkShowClose()},function(){t.showToast({icon:"none",title:"保存失败"})},function(){})},closeClick:function(){var e=this,n=u.default.copyObj(e.obj);n["userid"]=e.userInfo.userid,n["sublist"]=JSON.stringify(n["sublist"]),n["status"]="2",s.default.requestLoading(i.default.UpdatePoint,n,"正在加载",function(n){t.showToast({icon:"none",title:"关单成功",duration:1e3}),e.obj.status=n.status,e.obj.id=n.id,e.checkShowClose()},function(){t.showToast({icon:"none",title:"关单失败"})},function(){})},checkShowClose:function(){"1"==this.obj.status&&null!=this.obj.id&&""!=this.obj.id?this.showClose=!0:this.showClose=!1,"2"==this.obj.status?(this.showSave=!1,this.editable=!1):(this.showSave=!0,this.editable=!0)}})};e.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},"7d51":function(t,e,n){"use strict";(function(t){n("de83"),n("921b");o(n("66fd"));var e=o(n("e51e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"7f6f":function(t,e,n){"use strict";var o=n("348f"),i=n.n(o);i.a},bafa:function(t,e,n){"use strict";n.r(e);var o=n("7c65"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);e["default"]=i.a},e51e:function(t,e,n){"use strict";n.r(e);var o=n("0a4f"),i=n("bafa");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("7f6f");var u=n("2877"),a=Object(u["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=a.exports}},[["7d51","common/runtime","common/vendor"]]]);