(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pointAdd/pointCheckInfo"],{"2bc3":function(t,e,i){"use strict";i.r(e);var n=i("4924"),o=i("e7d1");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("9e98");var a=i("2877"),u=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports},"37b6":function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(i("17f7")),s=u(i("3731")),a=i("2f62");function u(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function(){return i.e("components/list/uni-list/uni-list").then(i.bind(null,"7c03"))},f=function(){return i.e("components/list/uni-list-item/uni-list-item").then(i.bind(null,"4b9c"))},d={computed:(0,a.mapState)(["inputPageText","key","userInfo"]),components:{uniList:l,uniListItem:f},data:function(){return{needGetInputOnShow:!1,typeArray:["正常","未检","异常"],rectifyTypes:["发起隐患整改单"],item:"",itemIndex:0,imageViewHeight:100,imageList:[],littleImageWidth:0}},onLoad:function(e){if(console.log(t("测试："+e.item," at pages/pointAdd/pointCheckInfo.vue:98")),this.item=JSON.parse(e.item),this.itemIndex=JSON.parse(e.index),this.littleImageWidth=(n.getSystemInfoSync().windowWidth-50)/4,null!=this.item.fj&&""!=this.item.fj){console.log(t("FJ:"+this.item.fj," at pages/pointAdd/pointCheckInfo.vue:106"));for(var i=JSON.parse(this.item.fj),s=0;s<i.length;s++){var a=i[s],u=o.default.host+o.default.loadImage+a.fileId+"&userid="+this.userInfo.userid,r={fileid:a.fileId,src:u,type:2};this.imageList.push(r)}}},onShow:function(){1==this.needGetInputOnShow&&(this.item[this.key]=this.inputPageText,this.needGetInputOnShow=!1)},methods:r({},(0,a.mapMutations)(["setSublistItem"]),{bindTypeChange:function(t){this.item.jcjl=this.typeArray[t.detail.value],"正常"==this.item.jcjl&&(this.item.zgfs="")},bindRectifyChange:function(t){this.item.zgfs=this.rectifyTypes[t.detail.value]},jumpInput:function(t){this.needGetInputOnShow=!0,n.navigateTo({url:"../common/inputPage?text="+t+"&key=jcwtms&placeholder=请输入问题描述"})},saveItem:function(){for(var e=this,i=o.default.uploadImage+"?from=jc&yyid="+e.item.id+"&userid="+e.userInfo.userid,a=[],u=0;u<e.imageList.length;u++){var r=e.imageList[u];1!=r.type||r.src.startsWith("http:")||a.push(r.src)}if(0==a.length)return e.saveLocalItem(),void n.navigateBack({delta:1});n.showLoading({title:"正在上传图片"}),s.default.uploadImage(i,a,0,0,0,a.length,function(i){var n=JSON.parse(i.data),o=n.fj;e.item.fj=o,console.log(t("Item:",JSON.stringify(e.item)," at pages/pointAdd/pointCheckInfo.vue:171"))},function(t){n.hideLoading(),"200"==t&&(e.saveLocalItem(),n.showToast({title:"上传成功",complete:setTimeout(function(){n.navigateBack({delta:1})},1500)}))})},saveLocalItem:function(){var t={item:this.item,index:this.itemIndex};this.setSublistItem(t)},deleteImage:function(e,i){var a=this;if(e.src.startsWith("http:")){var u={item:a.item,index:a.itemIndex};a.setSublistItem(u);var r={from:"jc",yyid:a.item.id,fileid:e.fileid,userid:a.userInfo.userid};s.default.requestLoading(o.default.deleteImage,r,"正在删除图片",function(e){console.log(t("删除成功："+JSON.stringify(e)," at pages/pointAdd/pointCheckInfo.vue:215")),a.item.fj=e.fj,a.imageList.splice(i,1)},function(){n.showToast({icon:"none",title:"删除失败"})},function(){})}else a.imageList.splice(i,1)},viewPhoto:function(){for(var t=this,e=[],i=0;i<t.imageList.length;i++){var o=t.imageList[i];e.push(o.src)}n.previewImage({urls:e})},addPhoto:function(){var e=this;n.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){console.log(t(JSON.stringify(i.tempFilePaths)," at pages/pointAdd/pointCheckInfo.vue:254"));for(var n=0;n<i.tempFilePaths.length;n++){var o={fileid:"",src:i.tempFilePaths[n],type:1};e.imageList.push(o)}}})}})};e.default=d}).call(this,i("0de9")["default"],i("6e42")["default"])},4924:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"9e98":function(t,e,i){"use strict";var n=i("b674"),o=i.n(n);o.a},b674:function(t,e,i){},c479:function(t,e,i){"use strict";(function(t){i("de83"),i("921b");n(i("66fd"));var e=n(i("2bc3"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},e7d1:function(t,e,i){"use strict";i.r(e);var n=i("37b6"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a}},[["c479","common/runtime","common/vendor"]]]);