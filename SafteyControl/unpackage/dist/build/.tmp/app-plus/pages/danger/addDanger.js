(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/danger/addDanger"],{7058:function(t,e,i){"use strict";i.r(e);var n=i("d6b6"),s=i("c5e3");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);i("712e");var o=i("2877"),l=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,null,null);l.options.__file="addDanger.vue",e["default"]=l.exports},"712e":function(t,e,i){"use strict";var n=i("b60b"),s=i.n(n);s.a},"728d":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("7c03")),s=c(i("ba08")),a=c(i("4b9c")),o=c(i("17f7")),l=c(i("3731")),u=c(i("59a9")),d=i("2f62");function c(t){return t&&t.__esModule?t:{default:t}}var r={computed:(0,d.mapState)(["sublistItem","sublistIndex","userInfo"]),components:{uniList:n.default,uniListItem:a.default,uniIcon:s.default},data:function(){return{needGetItemOnShow:!1,needGetInputOnShow:!1,showClose:!1,showSave:!1,editable:!1,imageViewHeight:100,imageList:[],newaddImagelist:[],littleImageWidth:0,obj:"",normal:{color:"#24BE41",size:"22",type:"checkbox-filled"},undetected:{color:"#FFDE52",size:"22",type:"info-filled"},abnormal:{color:"#C11E1E",size:"22",type:"clear"}}},onLoad:function(t){},onNavigationBarButtonTap:function(){var e=this;0!=e.editable?t.showModal({title:"提示",content:"确认要设置所有的检查点都正常吗？",success:function(t){if(t.confirm)for(var i=0;i<e.obj.sublist.length;i++){var n=e.obj.sublist[i];n["jcjl"]="正常",n["jcwtms"]="",n["zgfs"]=""}else t.cancel}}):t.showToast({icon:"none",title:"已关单 无法编辑",duration:1e3})},onShow:function(){1==this.needGetItemOnShow&&null!=this.sublistIndex&&null!=this.sublistItem&&(console.log(""+JSON.stringify(this.sublistItem)),this.obj.sublist[this.sublistIndex]=this.sublistItem),this.needGetItemOnShow=!1},methods:{bindDateChange:function(t){this.obj.jcrq=t.target.value},jumpEdit:function(e,i){0!=this.editable&&(this.needGetItemOnShow=!0,t.navigateTo({url:"./pointCheckInfo?item="+JSON.stringify(e)+"&index="+i}))},getIcon:function(t){return"正常"==t.jcjl?this.normal:"异常"==t.jcjl?this.abnormal:this.undetected},saveClick:function(){},closeClick:function(){var e=this,i=u.default.copyObj(e.obj);i["userid"]=e.userInfo.userid,i["sublist"]=JSON.stringify(i["sublist"]),i["status"]="2",l.default.requestLoading(o.default.UpdatePoint,i,"正在加载",function(i){t.showToast({icon:"none",title:"关单成功",duration:1e3}),e.obj.status=i.status,e.obj.id=i.id,e.checkShowClose()},function(){t.showToast({icon:"none",title:"关单失败"})},function(){})},checkShowClose:function(){"1"==this.obj.status&&null!=this.obj.id&&""!=this.obj.id?this.showClose=!0:this.showClose=!1,"2"==this.obj.status?(this.showSave=!1,this.editable=!1):(this.showSave=!0,this.editable=!0)},jumpInput:function(e){this.needGetInputOnShow=!0,t.navigateTo({url:"../common/inputPage?text="+e+"&key=jcwtms&placeholder=请输入问题描述"})}}};e.default=r}).call(this,i("649d")["default"])},a35e:function(t,e,i){"use strict";i("de83");var n=a(i("b0ce")),s=a(i("7058"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},b60b:function(t,e,i){},c5e3:function(t,e,i){"use strict";i.r(e);var n=i("728d"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},d6b6:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"baseView"},[t._m(0),i("view",{staticClass:"cellInfoView"},[i("uni-list",{attrs:{mpcomid:"72ed35ad-11"}},[i("uni-list-item",{attrs:{title:"隐患描述","show-arrow":"true",eventid:"72ed35ad-0",mpcomid:"72ed35ad-0"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"整改要求","show-arrow":"true",eventid:"72ed35ad-1",mpcomid:"72ed35ad-1"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"临时预防措施","show-arrow":"true",eventid:"72ed35ad-2",mpcomid:"72ed35ad-2"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"隐患等级","show-arrow":"true",eventid:"72ed35ad-3",mpcomid:"72ed35ad-3"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"隐患类型","show-arrow":"true",eventid:"72ed35ad-4",mpcomid:"72ed35ad-4"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"整改负责人","show-arrow":"true",eventid:"72ed35ad-5",mpcomid:"72ed35ad-5"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"整改期限","show-arrow":"true",eventid:"72ed35ad-6",mpcomid:"72ed35ad-6"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"隐患发现人","show-arrow":"true",eventid:"72ed35ad-7",mpcomid:"72ed35ad-7"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"隐患发现部门","show-arrow":"true",eventid:"72ed35ad-8",mpcomid:"72ed35ad-8"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"隐患发现日","show-arrow":"true",eventid:"72ed35ad-9",mpcomid:"72ed35ad-9"},on:{click:function(e){t.jumpInput("")}}}),i("uni-list-item",{attrs:{title:"责任部门","show-arrow":"true",eventid:"72ed35ad-10",mpcomid:"72ed35ad-10"},on:{click:function(e){t.jumpInput("")}}})],1),i("view",{staticClass:"imageBaseView",style:{height:58+t.imageViewHeight+"px"}},[i("view",{staticClass:"titleView"},[i("text",{staticClass:"cellText1"},[t._v("隐患照片")]),i("text",{staticClass:"cellText3"},[t._v(t._s(t.imageList.length))])]),i("view",{staticClass:"imageView",style:{height:t.imageViewHeight+"px"},attrs:{id:"imageView"}},[t._l(t.imageList,function(e,n){return i("block",{key:n},[i("view",{staticClass:"littleImageView",style:{width:t.littleImageWidth+"px",height:t.littleImageWidth+"px"}},[i("image",{staticClass:"littleImage",attrs:{bindtap:"viewPhoto",id:n,src:e}}),i("image",{staticClass:"littleImageDelete",attrs:{src:"../../static/img/delete.png",id:n,eventid:"72ed35ad-11-"+n},on:{click:t.deleteImage}})])])}),i("view",{staticClass:"littleImageView",style:{width:t.littleImageWidth+"px",height:t.littleImageWidth+"px"},attrs:{eventid:"72ed35ad-12"},on:{click:t.addPhoto}},[i("image",{staticClass:"littleImage",attrs:{src:"../../static/img/addImage.png"}})])],2)])],1),i("view",{staticClass:"btnView"},[i("button",{staticClass:"saveBtn",attrs:{eventid:"72ed35ad-13"},on:{tap:t.saveClick}},[t._v("保存")])],1)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cellTitleView"},[i("text",{staticClass:"cellTitle"},[t._v("隐患信息")])])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})}},[["a35e","common/runtime","common/vendor"]]]);