(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/danger/detailDanger"],{3244:function(e,t,i){"use strict";i("835e");var n=s(i("b0ce")),a=s(i("5630"));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,n.default)(a.default))},"4c7c":function(e,t,i){},5630:function(e,t,i){"use strict";i.r(t);var n=i("8821"),a=i("b844");for(var s in a)"default"!==s&&function(e){i.d(t,e,function(){return a[e]})}(s);i("dfc2");var o=i("2877"),l=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=l.exports},"5e06":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(i("7cb5")),a=c(i("5718")),s=c(i("1578")),o=c(i("f5eb")),l=c(i("6c6c")),r=(c(i("89f5")),i("2f62"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){d(e,t,i[t])})}return e}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={computed:(0,r.mapState)(["sublistItem","sublistIndex","userInfo","inputPageText","key"]),components:{uniList:n.default,uniListItem:s.default,uniIcon:a.default},data:function(){return{needGetInputOnShow:!1,imageViewHeight:100,imageList:[],littleImageWidth:0,dangerId:"",dangerLevel:"",dangerType:"",dangerDesc:"",dangerClause:"",dangerAdvise:"",dangerDept:"",checkDate:"",dangerLevelData:["一般隐患","重大隐患"],dangerTypeData:["人员伤害","财产损失","其他"],dangerDescData:["从隐患库选择/检索","自行输入问题","从常用隐患库选择"],dangerClauseData:["从隐患库选择/检索","自行输入问题","从法规库选择"],dangerDeptData:["从隐患库选择/检索","自行输入问题","从部门库选择"],taskDefKey:"",instId:"",nodeName:"",obj:null,styleFlag:{checkDate:!1}}},onLoad:function(t){console.log("加载页面...");var i=this;i.taskDefKey=JSON.parse(t.params).taskDefKey,i.instId=JSON.parse(t.params).instId,i.nodeName=JSON.parse(t.params).name,l.default.requestLoadingNew(o.default.getYhzgDetail,JSON.parse(t.params),"正在加载详情",function(e){console.log(""+JSON.stringify(e));var t=e.data;console.log(t),i.dangerId=t.id,i.dangerLevel=t.yhdj,i.dangerType=t.yhhg,i.dangerDesc=t.zgyj,i.dangerClause=t.wfflfgjtk,i.dangerAdvise=t.gsyqjjy,i.dangerDept=t.zrbm,console.log("当前节点："+i.taskDefKey+"   节点名称："+i.nodeName)},function(){e.showToast({icon:"none",title:"请求失败"})},function(){}),this.littleImageWidth=(e.getSystemInfoSync().windowWidth-50)/4,this.checkPeople=this.userInfo.fullname},onNavigationBarButtonTap:function(){},onShow:function(){1==this.needGetInputOnShow&&(this.$data[this.key]=this.inputPageText,this.needGetInputOnShow=!1,this.removeInputItem())},methods:u({},(0,r.mapMutations)(["removeInputItem"]),{deadLineChange:function(e){this.deadLine=e.target.value},bindDateChange:function(e){this.checkDate=e.target.value},historyClick:function(){e.showToast({icon:"none",title:"敬请期待！",duration:1e3})},flowPicClick:function(){e.showToast({icon:"none",title:"敬请期待！",duration:1e3})},backFlowClick:function(){e.showToast({icon:"none",title:"敬请期待！",duration:1e3})},saveClick:function(){var t=this,i={refid:t.dangerId,id:t.dangerId,userid:t.userInfo.userid,taskDefKey:t.taskDefKey};console.log(t.taskDefKey);var n=t.taskDefKey;"sid-A0CE4647-CCC3-4A9A-81BF-09FCAB7CDCA4"===n||"sid-3785D27C-9B73-4C6D-9C1C-6A4ECA6B8FFE"===n||"sid-41BC6E14-5C85-42A1-8E1B-3246FDEA682C"===n&&(i.yhjb=t.dangerLevel,i.yhfl=t.dangerType,i.yhms=t.dangerDesc,i.dytk=t.dangerClause,i.zgjy=t.dangerAdvise,i.zgwcsj=t.checkDate,i.jcr=t.checkPeople,i.zgqx=t.deadLine,i.zgqx=t.deadLine),l.default.requestLoadingNew(o.default.updateYhzgFlow,i,"正在加载",function(i){e.showToast({icon:"none",title:"保存成功",duration:1e3}),t.dangerId=i.id,e.navigateTo({url:"../danger/detailList"})},function(){e.showToast({icon:"none",title:"保存失败"})},function(){})},jumpInput:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"请输入描述";this.needGetInputOnShow=!0,e.navigateTo({url:"../common/inputPage?text="+t+"&key="+i+"&placeholder="+n})},addPhoto:function(){var t=this;e.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){console.log(JSON.stringify(e.tempFilePaths));for(var i=0;i<e.tempFilePaths.length;i++){var n={fileid:"",src:e.tempFilePaths[i],type:1};t.imageList.push(n)}}})},deleteImage:function(t,i){var n=this;if(t.src.startsWith("http:")){var a={item:n.item,index:n.itemIndex};n.setSublistItem(a);var s={from:"jc",yyid:n.item.id,fileid:t.fileid,userid:n.userInfo.userid};l.default.requestLoading(o.default.deleteImage,s,"正在删除图片",function(e){console.log("删除成功："+JSON.stringify(e)),n.item.fj=e.fj,n.imageList.splice(i,1)},function(){e.showToast({icon:"none",title:"删除失败"})},function(){})}else n.imageList.splice(i,1)},viewPhoto:function(){for(var t=this,i=[],n=0;n<t.imageList.length;n++){var a=t.imageList[n];i.push(a.src)}e.previewImage({urls:i})}})};t.default=f}).call(this,i("649d")["default"])},8821:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"baseView"},[e._m(0),i("view",{staticClass:"cellInfoView"},[i("uni-list",{attrs:{mpcomid:"be86b3f6-6"}},[i("uni-list-item",{attrs:{title:"责任部门",subnote:e.dangerDept,"show-arrow":"false",mpcomid:"be86b3f6-0"}}),i("uni-list-item",{attrs:{title:"隐患级别",subnote:e.dangerLevel,"show-arrow":"false",mpcomid:"be86b3f6-1"}}),i("uni-list-item",{attrs:{title:"隐患后果",subnote:e.dangerType,"show-arrow":"false",mpcomid:"be86b3f6-2"}}),i("uni-list-item",{attrs:{title:"不合格因素",subnote:e.dangerDesc,"show-arrow":"false",mpcomid:"be86b3f6-3"}}),i("uni-list-item",{attrs:{title:"对应条款",subnote:e.dangerClause,"show-arrow":"false",mpcomid:"be86b3f6-4"}}),i("uni-list-item",{attrs:{title:"整改要求及建议",subnote:e.dangerAdvise,"show-arrow":"false",mpcomid:"be86b3f6-5"}})],1)],1),e._m(1),i("view",{staticClass:"cellInfoView"},[i("uni-list",{attrs:{mpcomid:"be86b3f6-15"}},[i("picker",{attrs:{mode:"date",value:e.checkDate,eventid:"be86b3f6-0"},on:{change:e.bindDateChange}},[i("uni-list-item",{attrs:{title:"检查日期",subnote:e.checkDate,showSwitch:e.styleFlag.checkDate,mpcomid:"be86b3f6-7"}})],1),i("uni-list-item",{attrs:{title:"整改意见",subnote:e.zgyj,"show-arrow":"false",showSwitch:e.styleFlag.zgyj,mpcomid:"be86b3f6-8"}}),i("picker",{attrs:{mode:"date",value:e.zgqx,eventid:"be86b3f6-1"},on:{change:e.bindDateChange}},[i("uni-list-item",{attrs:{title:"整改期限",subnote:e.zgqx,showSwitch:e.styleFlag.zgqx,mpcomid:"be86b3f6-9"}})],1),i("uni-list-item",{attrs:{title:"整改情况",subnote:e.zgqk,"show-arrow":"false",showSwitch:e.styleFlag.zgqk,mpcomid:"be86b3f6-10"}}),i("picker",{attrs:{mode:"date",value:e.zgwcrq,showSwitch:e.styleFlag.zgwcrq,eventid:"be86b3f6-2"},on:{change:e.bindDateChange}},[i("uni-list-item",{attrs:{title:"整改完成日期",subnote:e.zgwcrq,showSwitch:e.styleFlag.zgwcrq,mpcomid:"be86b3f6-11"}})],1),i("uni-list-item",{attrs:{title:"治理资金",subnote:e.zlzj,"show-arrow":"false",showSwitch:e.styleFlag.zlzj,mpcomid:"be86b3f6-12"}}),i("uni-list-item",{attrs:{title:"原因分析",subnote:e.yyfx,"show-arrow":"false",showSwitch:e.styleFlag.yyfx,mpcomid:"be86b3f6-13"}}),i("uni-list-item",{attrs:{title:"验证情况",subnote:e.yzqk,"show-arrow":"false",showSwitch:e.styleFlag.yzqk,mpcomid:"be86b3f6-14"}})],1)],1),i("view",{staticClass:"btnView"},[i("button",{staticClass:"saveBtn",attrs:{eventid:"be86b3f6-3"},on:{tap:e.saveClick}},[e._v("同意")]),i("button",{staticClass:"saveBtn",attrs:{eventid:"be86b3f6-4"},on:{tap:e.historyClick}},[e._v("审批历史")]),i("button",{staticClass:"saveBtn",attrs:{eventid:"be86b3f6-5"},on:{tap:e.flowPicClick}},[e._v("流程图")]),i("button",{staticClass:"saveBtn",attrs:{eventid:"be86b3f6-6"},on:{tap:e.backFlowClick}},[e._v("驳回")])],1)])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"cellTitleView"},[i("text",{staticClass:"cellTitle"},[e._v("基础信息")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"cellTitleView"},[i("text",{staticClass:"cellTitle"},[e._v("审批信息")])])}];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},b844:function(e,t,i){"use strict";i.r(t);var n=i("5e06"),a=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,function(){return n[e]})}(s);t["default"]=a.a},dfc2:function(e,t,i){"use strict";var n=i("4c7c"),a=i.n(n);a.a}},[["3244","common/runtime","common/vendor"]]]);